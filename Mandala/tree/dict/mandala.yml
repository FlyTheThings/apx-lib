name: mandala
title: Mandala
descr: Vehicle core data manager and data structure.

# Parameters:
#
# name:   short name of class/struct
# title:  text title
# descr:   text description
# units:  text units of measure
# type:   data type
# prec:   number precision, decimal points
# sfmt:   stream packing format
# suffix: make title from parent.title+suffix
# alias:  shortcut name

# Parameters are inherited from parent by child fields

# Tree UID contains 6 levels of IDs (15 bits):
# 0CCT SSSM MMGG GFFF
#
#   4  classes      2 bits  b14-b13   x4  [sns, ctr, state, cmd]
#   2  types        1 bit   b12       x2  [nav, env]
#   8  subsystems   3 bits  b11-b9    x8
#   8  modules      3 bits  b8-b6     x8
#   8  groups       3 bits  b5-b3     x8
#   8  fields       3 bits  b2-b0     x8

# Data flow:
#
#   |sensors|  ->  |state|  ->  |cmd|  ->  |ctr|
#   |-----estimators-----|
#                  |---navigators---|
#                               |--controllers-|
#                  |---------telemetry---------|
#                               |----uplink----|

# config for parsers
inheritance:
  - type
  - prec
  - sfmt
  - units

uid_bits:
  - 2
  - 1
  - 3
  - 3
  - 3
  - 3

# defaults:
type: float
prec: 2
sfmt: f2

# 4 classes
content:
  - name: sns
    title: Sensors
    descr: Read only data sources, measured by sensors from physical parameters.
      Used as inputs to estimators. Never sent through telemetry stream.
    content:
      - name: nav
        content: sns-nav
        title: Navigation
        descr: Sensors used for vehicle navigation and controls.
          Used as input for position and attitude estimators and
          for filters to supply aerodynamic controls.

      - name: env
        content: sns-env
        title: Environment
        descr: Environmental sensors.
          Data used as inputs for filters to estimate vehicle state
          and safety conditions.

  - name: ctr
    title: Controls
    descr: Controls for vehicle drives and servos.
      Published by regulators.
    content:
      - name: nav
        # content: ctr-nav
        title: Navigation
        descr: Controls used for vehicle stabilization.
          Data published by controllers for aerodynamic controls.

      - name: env
        # content: ctr-env
        title: Environment
        descr: Environmental controls.
          Data generated by internal logic or uplink from GCS.

  - name: state
    title: State
    descr: Current vehicle state.
      Estimated values of sensors and current navigator status.
    content:
      - name: nav
        # content: state-nav
        title: Navigation
        descr: Estimated data used for vehicle regulators.
          Filtered sensor data.

      - name: env
        # content: state-env
        title: Environment
        descr: Processed data of current vehicle conditions.
          Can be overriden by GCS uplink.

  - name: cmd
    title: Commands
    descr: Commanded values.
      Received from the GCS or provided by navigator as commands for
      regulators.
    content:
      - name: nav
        # content: cmd-nav
        title: Navigation
        descr: Commanded values generated by controllers.

      - name: env
        # content: cmd-env
        title: Environment
        descr: Values received through GCS uplink only.
          Never generated by controllers.
